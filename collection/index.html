---
layout: default
title: Feng's Collection
---
<div class="container col-md-11">

<h2 id="h-sites">Great Sites in the clouds</h2>

<div id="lang-switch" style="float:right; margin-top:-28px; font-size:0.95em;">
  <a href="#" id="lang-en">English</a> | <a href="#" id="lang-zh">中文</a>
  </div>

<p>	Jaap's puzzle page: <a href="https://www.jaapsch.net/puzzles/">https://www.jaapsch.net/puzzles/</a></p>
<p>	Baez's math page: <a href="https://math.ucr.edu/home/baez/">https://math.ucr.edu/home/baez/</a></p>
<p> Great resource for serious fitness folks: <a href="http://www.exrx.net/Lists/Directory.html">http://www.exrx.net/Lists/Directory.html</a></p>
<p> ... To Be Continued ... </p>
<br>
</div>

<div class="container col-md-11">
<div class="creators-header">
  <h2 id="h-creators">Creator/Channels I enjoy</h2>
  <div id="yt-toolbar-slot"></div>
</div>
  <p><br></p>
<div id="yt-creators"></div>
</div>

<script>
// Dynamically build categorized channel list from subscriptions.csv
(function() {
  const container = document.getElementById('yt-creators');
  const toolbarSlot = document.getElementById('yt-toolbar-slot');
  if (!container) return;

  // Category order and labels
  let categoryOrder = [
    'Music & Audio',
    'Makers & To-Makes',
    'Nature & Discoveries',
    'Scientific Expositions',
    'Engineering & Technology',
    'Mathematics & Puzzles',
    'Visual Media & Critiques',
    'Entertainers & Comedy',
    'Philosophies & Politics',
    'Outdoor Sports & Climbing',
    'Institutes & Organizations',
    'Uncategorized & Uncategorizable'
  ];

  // No heuristic or explicit fallback. Categories come from CSV only.

  function parseCSV(text) {
    const lines = text.split(/\r?\n/);
    const out = [];
    const comments = [];
    for (let i = 0; i < lines.length; i++) {
      const line = lines[i];
      if (!line.trim()) continue;
      if (/^\s*[#\/]{1}/.test(line)) { comments.push(line.trim()); continue; }
      let inQuotes = false, field = '', row = [];
      for (let j = 0; j < line.length; j++) {
        const ch = line[j];
        if (ch === '"') {
          // toggle on unescaped quote
          const next = line[j+1];
          if (next === '"') { field += '"'; j++; }
          else { inQuotes = !inQuotes; }
        } else if (ch === ',' && !inQuotes) {
          row.push(field); field = '';
        } else {
          field += ch;
        }
      }
      row.push(field);
      out.push(row);
    }
    return { rows: out, comments };
  }

  // rely on subscriptions.csv mapping

  function buildList(cats) {
    // toolbar
    const toolbar = document.createElement('div');
    toolbar.className = 'yt-toolbar';
    const expandBtn = document.createElement('button');
    expandBtn.type = 'button'; expandBtn.textContent = 'Expand All';
    const collapseBtn = document.createElement('button');
    collapseBtn.type = 'button'; collapseBtn.textContent = 'Collapse All';
    toolbar.appendChild(expandBtn);
    toolbar.appendChild(collapseBtn);
    if (toolbarSlot) toolbarSlot.appendChild(toolbar); else container.appendChild(toolbar);

    // grid wrapper
    const grid = document.createElement('div');
    grid.className = 'yt-grid';
    container.appendChild(grid);

    const detailBlocks = [];
    for (const cat of categoryOrder) {
      const items = (cats[cat] || []).sort((a,b) => a.title.localeCompare(b.title));
      if (!items.length) continue;
      const details = document.createElement('details');
      details.className = 'yt-block';
      // default collapsed
      // details.open = false;
      const summary = document.createElement('summary');
      const count = document.createElement('span');
      count.className = 'yt-count';
      count.textContent = ` (${items.length})`;
      const label = document.createElement('span');
      label.className = 'yt-label';
      label.textContent = cat;
      summary.appendChild(label);
      summary.appendChild(count);
      details.appendChild(summary);

      const ul = document.createElement('ul');
      for (const it of items) {
        const li = document.createElement('li');
        const a = document.createElement('a');
        a.href = it.url; a.target = '_blank'; a.rel = 'noopener';
        a.textContent = it.title;
        li.appendChild(a);
        ul.appendChild(li);
      }
      details.appendChild(ul);
      grid.appendChild(details);
      detailBlocks.push(details);
    }

    expandBtn.addEventListener('click', () => {
      for (const d of detailBlocks) d.open = true;
    });
    collapseBtn.addEventListener('click', () => {
      for (const d of detailBlocks) d.open = false;
    });
  }

  fetch('/collection/subscriptions.csv', {cache: 'no-store'})
    .then(r => r.text())
    .then(text => {
      const parsed = parseCSV(text);
      let table = parsed.rows;
      const comments = parsed.comments || [];

      // Extract category mapping from comments if present: "# 1 = Category Name"
      const map = {};
      for (const c of comments) {
        const m = c.match(/^#\s*(\d+)\s*[=:]\s*(.+)$/);
        if (m) map[parseInt(m[1],10)] = m[2].trim();
      }
      // Skip header row
      if (table.length && (table[0][0]||'').toLowerCase().includes('channel')) table.shift();

      // Parse rows (robust to spaces after commas)
      const parsedRows = [];
      const seen = new Set();
      for (const row of table) {
        if (!row || row.length < 3) continue;
        const url = (row[0] || '').trim();
        const title = (row[1] || '').trim();
        const catIdRaw = (row[2] || '').trim();
        if (!url || !title || seen.has(title)) continue;
        seen.add(title);
        const catId = parseInt(catIdRaw, 10);
        if (isNaN(catId)) continue; // require explicit category
        parsedRows.push({ url, title, catId });
      }

      // Determine which category ids are present in data
      const idsPresent = Array.from(new Set(parsedRows.map(r => r.catId))).sort((a,b)=>a-b);
      // Build id->name mapping using comments if provided, else fallback label
      const idToName = {};
      for (const id of idsPresent) {
        idToName[id] = map[id] || `Category ${id}`;
      }
      // Final category order by increasing id unless comment map specifies subset order
      categoryOrder = idsPresent.map(id => idToName[id]);

      // Bucket rows into categories
      const cats = Object.fromEntries(categoryOrder.map(c => [c, []]));
      for (const r of parsedRows) {
        let href = r.url;
        if (!/^https?:\/\//i.test(href)) href = 'http://' + href.replace(/^\/*/, '');
        const name = idToName[r.catId] || `Category ${r.catId}`;
        (cats[name] = cats[name] || []).push({ title: r.title, url: href });
      }
      buildList(cats);
    })
    .catch(err => {
      const p = document.createElement('p');
      p.textContent = 'Failed to load subscriptions.csv';
      container.appendChild(p);
      console.error(err);
    });
})();
</script>

<div class="container col-md-11">
  <h2 id="h-otherbits">Other random bits</h2>

  <p>Cool doodle games: <a href="https://sites.google.com/site/populardoodlegames/"">https://sites.google.com/site/populardoodlegames/</a> </p>
  <p>In particular, Check out the <a href="https://www.google.com/logos/2018/bach/r3/bach18.html">AI 4 Bach</a> project</p>
</div>

<style>
/* Optional subtle emphasis for active language */
#lang-switch a { text-decoration: none; }
#lang-switch a.active { font-weight: bold; text-decoration: underline; }
.creators-header { display: flex; align-items: center; justify-content: space-between; gap: 12px; }
.creators-header h2 { margin: 0; }
.creators-header .yt-toolbar { margin: 0; }
</style>

<script>
(function() {
  // Chinese translations for header/tabs and H2s only
  const zh = {
    'header-top': '<a href="/\"><h1>凌峰</h1></a>',
    'hometab': '<a href="/">首页</a>',
    'cvtab': '<a href="/cv">作品</a>',
    'moretab': '其他 <b class="caret"></b>',
    'collectab': '秋收冬藏',
    'filmtab': '影评（久无更新）',
    'fototab': '摄影（久无更新）',
    'blogtab': '博客（久无更新）',
    'h-sites': '特别的网站',
    'h-creators': '欣赏的频道/博主',
    'h-otherbits': '杂七杂八'
  };

  function setActiveLink(lang) {
    var en = document.getElementById('lang-en');
    var zhLink = document.getElementById('lang-zh');
    if (en && zhLink) {
      en.classList.toggle('active', lang === 'en');
      zhLink.classList.toggle('active', lang === 'zh');
    }
  }

  function setLang(lang) {
    document.documentElement.classList.toggle('lang-zh', lang === 'zh');
    document.documentElement.classList.toggle('lang-en', lang !== 'zh');
    try { localStorage.setItem('lang', lang); } catch(e) {}

    Object.keys(zh).forEach(function(id) {
      var el = document.getElementById(id);
      if (!el) return;
      if (!el.dataset.en) { el.dataset.en = el.innerHTML; }
      el.innerHTML = (lang === 'zh') ? zh[id] : el.dataset.en;
    });

    setActiveLink(lang);
  }

  document.addEventListener('DOMContentLoaded', function() {
    var stored = 'en';
    try { stored = localStorage.getItem('lang') || 'en'; } catch(e) {}
    setLang(stored);
    var en = document.getElementById('lang-en');
    var zhLink = document.getElementById('lang-zh');
    if (en) en.addEventListener('click', function(e){ e.preventDefault(); setLang('en'); });
    if (zhLink) zhLink.addEventListener('click', function(e){ e.preventDefault(); setLang('zh'); });
  });
})();
</script>
